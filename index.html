<!DOCTYPE html>  <html lang="th">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>AI Prompt Builder PRO+</title>  <style>  
body{  
  margin:0;  
  font-family:system-ui;  
  background:#f2f2f2;  
}  
.container{  
  display:flex;  
  height:100vh;  
}  
  
/* LEFT */  
.left{  
  width:70%;  
  padding:12px;  
  margin-right:30%;  
  overflow:auto;  
}  
  
/* RIGHT */  
.right{  
  width:30%;  
  background:#111;  
  color:#0f0;  
  padding:12px;  
  position:fixed;  
  right:0;  
  top:0;  
  height:100%;  
}  
  
/* TOP BAR */  
.topbar{  
  display:flex;  
  gap:6px;  
  margin-bottom:12px;  
  position:sticky;  
  top:0;  
  background:#f2f2f2;  
  z-index:10;  
}  
  
.btn-blue{background:#007bff;color:#fff}  
.btn-purple{background:#6f42c1;color:#fff}  
.btn-green{background:#28a745;color:#fff}  
.btn-orange{background:#fd7e14;color:#fff}  
  
/* CARD */  
.card{  
  background:#fff;  
  border-radius:10px;  
  padding:12px;  
  margin-bottom:12px;  
  border-left:5px solid #ddd;  
}  
.card.active{  
  border-left:5px solid #28a745;  
  box-shadow:0 0 0 2px #28a74533;  
}  
  
.group{  
  border:2px dashed #bbb;  
  padding:10px;  
  border-radius:10px;  
  margin-bottom:12px;  
}  
  
h2{  
  margin:0 0 6px 0;  
  font-size:16px;  
}  
  
select,input,textarea,button{  
  width:100%;  
  padding:8px;  
  margin-top:6px;  
  border-radius:6px;  
  border:1px solid #ccc;  
}  
  
.row{  
  display:flex;  
  gap:6px;  
  margin-top:6px;  
}  
  
.add{background:#28a745;color:#fff;border:none}  
.del{  
  background:#dc3545;  
  color:#fff;  
  border:none;  
  flex:0.5;  
}  
.copy{background:#6c757d;color:#fff;border:none}  
  
.auto{
  background:#0d6efd;
  color:#fff;
  border:none;
  margin-top:8px;
  position:sticky;
  bottom:10px;
  z-index:20;
}  
  
.output{  
  height:55%;  
  background:#000;  
  color:#0f0;  
  font-family:monospace;  
}  
  
.log{  
  margin-top:8px;  
  background:#000;  
  color:#0f0;  
  font-size:12px;  
  padding:6px;  
  height:20%;  
  overflow:auto;  
  border-radius:6px;  
}  
</style>  </head>  <body>  
<div class="container">  <!-- LEFT -->  <div class="left">    <!-- TOP BAR -->    <div class="topbar">  
<button class="btn-blue" onclick="modeImage()">üñº ‡∏†‡∏≤‡∏û</button>
<button class="btn-purple" onclick="modeWork()">üß© ‡∏á‡∏≤‡∏ô</button>
<button class="btn-green" onclick="modeVoice()">üé§ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
<button class="btn-orange" onclick="modeSub()">‚úçÔ∏è ‡∏ã‡∏±‡∏ö</button>  
  </div>    <!-- PRESET -->    <div class="card">  
    <h2>üé¨ Preset Sora</h2>  
    <select id="presetSora" onchange="loadPreset()"></select>  
    <input id="presetName" placeholder="‡∏ä‡∏∑‡πà‡∏≠ Preset">  
    <textarea id="presetText" rows="4" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Preset"></textarea>  
    <div class="row">  
      <button class="add" onclick="savePreset()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>  
      <button class="del" onclick="deletePreset()">üóë ‡∏•‡∏ö</button>  
    </div>  
  </div>    <!-- MENU -->    
<!-- PRESET VEO -->
<div class="card">
  <h2>üé¨ Preset Veo</h2>
  <select id="presetVeo" onchange="loadVeoPreset()"></select>
  <input id="presetVeoName" placeholder="‡∏ä‡∏∑‡πà‡∏≠ Preset Veo">
  <textarea id="presetVeoText" rows="6" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Preset Veo (motion / camera / ASMR)"></textarea>
  <div class="row">
    <button class="add" onclick="saveVeoPreset()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <button class="del" onclick="deleteVeoPreset()">üóë ‡∏•‡∏ö</button>
  </div>
</div>
<div id="menu"></div>  
</div>  <!-- RIGHT -->  <div class="right">

  <h2>üìÑ Sora Prompt</h2>
  <textarea id="result" class="output" readonly></textarea>
  <button class="copy" onclick="copyText()">üìã Copy (Sora Prompt)</button>

  <hr style="margin:10px 0;border-color:#333">

  <h2>üé¨ Veo Prompt</h2>
  <textarea id="veoPrompt" class="output" readonly></textarea>

  <button class="auto" onclick="autoGenerate()">
    üé¨ Auto Generate (Veo via Flow)
  </button>

  <div class="log" id="log">
    > Ready for Auto Generate Mode<br>
  </div>

</div>  </div>  <script>  
    
function getValue(key){
  if(!data[key] || !data[key].enabled) return "";
  const s = document.getElementById(key + "_s");
  return s ? s.value : "";
}

function buildVeoPrompt(){
  const product = getValue("product");
  const work = getValue("work");
  const model = getValue("model");
  const style = getValue("style");
  const mood = getValue("mood");
  const voice = getValue("voice");

  const veoPreset =
  presetVeo && veoPresets[presetVeo.value]
  ? veoPresets[presetVeo.value].text
  : "";

  return `
${veoPreset}

SUBJECT:
${product || "A product"} in ${work || "UGC-style"} video.
${model ? `Featuring ${model}.` : ""}

SCENE:
${style || "Clean"} environment with ${mood || "natural"} mood.

AUDIO:
${voice || "No voice specified"}

QUALITY:
Ultra realistic, cinematic lighting, smooth motion.
`.trim();
}
  
const LS="PROMPT_BUILDER_DATA";  
const LS_VEO_PRESET = "VEO_PRESETS";
const LS_PRESET="SORA_PRESETS";  
  
const presetSora=document.getElementById("presetSora");  
const presetName=document.getElementById("presetName");  
const presetText=document.getElementById("presetText");  
const result=document.getElementById("result");  
const logBox=document.getElementById("log");  
const veoBox=document.getElementById("veoPrompt");
// ===== VEO PRESET VARIABLES (STEP 3) =====
const presetVeo = document.getElementById("presetVeo");
const presetVeoName = document.getElementById("presetVeoName");
const presetVeoText = document.getElementById("presetVeoText");

let veoPresets = JSON.parse(localStorage.getItem(LS_VEO_PRESET)) || {
  ugc_motion:{
    name:"UGC Motion Basic",
    text:`FORMAT:
Vertical 9:16 UGC-style video.

CAMERA:
Handheld smartphone feel, slow push-in.

MOTION:
Natural hand movement, soft fabric motion.

LIGHTING:
Soft natural lighting.

DURATION:
15 seconds, cinematic realism.`
  }
};

// ===== VEO PRESET FUNCTIONS =====
function renderVeoPresets(){
  presetVeo.innerHTML = "";
  Object.keys(veoPresets).forEach(k=>{
    const o = document.createElement("option");
    o.value = k;
    o.textContent = veoPresets[k].name;
    presetVeo.appendChild(o);
  });
  loadVeoPreset();
}

function loadVeoPreset(){
  const p = veoPresets[presetVeo.value];
  if(!p) return;
  presetVeoName.value = p.name;
  presetVeoText.value = p.text;
  update();
}

function saveVeoPreset(){
  if(!presetVeoName.value) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ Preset Veo");
  const k = presetVeoName.value.toLowerCase().replace(/\s+/g,"_");
  veoPresets[k] = {
    name: presetVeoName.value,
    text: presetVeoText.value
  };
  localStorage.setItem(LS_VEO_PRESET, JSON.stringify(veoPresets));
  renderVeoPresets();
  presetVeo.value = k;
}

function deleteVeoPreset(){
  if(!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö Preset Veo ‡∏ô‡∏µ‡πâ ?")) return;
  delete veoPresets[presetVeo.value];
  localStorage.setItem(LS_VEO_PRESET, JSON.stringify(veoPresets));
  renderVeoPresets();
}
  
let soraPresets=JSON.parse(localStorage.getItem(LS_PRESET)) || {  
  ugc:{name:"UGC ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"A vertical 9:16 UGC-style video.\nNatural lighting.\n15 seconds."}  
};  
  
function log(msg){  
  logBox.innerHTML += `> ${msg}<br>`;  
  logBox.scrollTop = logBox.scrollHeight;  
}  
  
function renderPresets(){  
  presetSora.innerHTML="";  
  Object.keys(soraPresets).forEach(k=>{  
    const o=document.createElement("option");  
    o.value=k;  
    o.textContent=soraPresets[k].name;  
    presetSora.appendChild(o);  
  });  
  loadPreset();  
}  
  
function loadPreset(){  
  const p=soraPresets[presetSora.value];  
  if(!p) return;  
  presetName.value=p.name;  
  presetText.value=p.text;  
  update();  
}  
  
function savePreset(){  
  if(!presetName.value) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ Preset");  
  const k=presetName.value.toLowerCase().replace(/\s+/g,"_");  
  soraPresets[k]={name:presetName.value,text:presetText.value};  
  localStorage.setItem(LS_PRESET,JSON.stringify(soraPresets));  
  renderPresets();  
  presetSora.value=k;  
}  

function deletePreset(){
  if(!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö Preset ‡∏ô‡∏µ‡πâ ?")) return;
  delete soraPresets[presetSora.value];
  localStorage.setItem(LS_PRESET, JSON.stringify(soraPresets));
  renderPresets();
}  
  
let data=JSON.parse(localStorage.getItem(LS)) || {  
  image:{enabled:false,items:["‡πÅ‡∏ï‡πà‡∏á‡∏†‡∏≤‡∏û 9:16"]},  
  product:{enabled:false,items:["‡∏ó‡πá‡∏≠‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå"]},  
  work:{enabled:false,items:["UGC ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß"]},  
  model:{enabled:false,items:["‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢"]},  
  style:{enabled:false,items:["Luxury"]},  
  mood:{enabled:false,items:["‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô"]},  
  voice:{enabled:false,items:["‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á"]},  
  subtitle:{enabled:false,items:["‡∏ã‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢"]}  
};  
  
function save(){localStorage.setItem(LS,JSON.stringify(data));}  
  
function section(title,key){  
  const c=data[key];  
  if(!c.enabled) return "";  
  return `  
  <div class="card active" id="sec-${key}">  
    <h2>${title}</h2>  
    <select id="${key}_s" onchange="update()">  
      ${c.items.map(v=>`<option>${v}</option>`).join("")}  
    </select>  
    <input id="${key}_i" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç">  
    <div class="row">  
      <button class="add" onclick="add('${key}')">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>  
      <button class="del" onclick="delItem('${key}')">üóë ‡∏•‡∏ö</button>  
    </div>  
  </div>`;  
}  
  
function render(){  
  document.getElementById("menu").innerHTML=  
    section("üñº ‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û","image")+  
    section("üì¶ ‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","product")+  
    section("üß† ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô","work")+  
    section("üë§ ‡∏ô‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö / ‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö","model")+  
    section("üé¨ ‡∏™‡πÑ‡∏ï‡∏•‡πå VDO","style")+  
    section("üå§ ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®","mood")+  
    section("üé§ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏≤‡∏Å‡∏¢‡πå","voice")+  
    section("‚úçÔ∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ã‡∏±‡∏ö‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡∏•","subtitle");  
  update();  
}  
  
function toggle(k,v){  
  data[k].enabled=v;  
  save();  
  render();  
}  
  
function add(k){  
  const i=document.getElementById(k+"_i");  
  if(!i.value) return;  
  data[k].items.push(i.value);  
  i.value="";  
  save();  
  render();  
}  
  
function delItem(k){  
  const s=document.getElementById(k+"_s");  
  if(!s) return;  
  if(!confirm(`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö "${s.value}" ?`)) return;  
  data[k].items.splice(s.selectedIndex,1);  
  save();  
  render();  
}  
  
function line(t,k){  
  if(!data[k].enabled) return "";  
  const s=document.getElementById(k+"_s");  
  return s?`${t}: ${s.value}\n`:"";  
}  
  
function update(){  
  const p=soraPresets[presetSora.value];  
  result.value=  
`### PRESET SORA ###  
${p?p.text:""}  
  
### DETAIL ###  
${line("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û","image")}  
${line("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","product")}  
${line("‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô","work")}  
${line("‡∏ô‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö/‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö","model")}  
${line("‡∏™‡πÑ‡∏ï‡∏•‡πå","style")}  
${line("‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®","mood")}  
${line("‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏≤‡∏Å‡∏¢‡πå","voice")}  
${line("‡∏ã‡∏±‡∏ö","subtitle")}`;  
veoBox.value = buildVeoPrompt();
}  
  
function resetAll(){Object.keys(data).forEach(k=>data[k].enabled=false);}  
function modeImage(){resetAll();["product","image"].forEach(k=>data[k].enabled=true);save();render();}  
function modeWork(){resetAll();["product","work","model","style","mood"].forEach(k=>data[k].enabled=true);save();render();}  
function modeVoice(){resetAll();["product","voice"].forEach(k=>data[k].enabled=true);save();render();}  
function modeSub(){resetAll();["product","subtitle"].forEach(k=>data[k].enabled=true);save();render();}  
  
function copyText(){  
  result.select();  
  navigator.clipboard.writeText(result.value);  
  log("Copy prompt for Sora ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");  
}  
  
async function autoGenerate(){
  const veoPrompt = buildVeoPrompt();
  const logEl = document.getElementById("log");

  if(!veoPrompt || typeof veoPrompt !== "string" || !veoPrompt.trim()){
    logEl.innerHTML += "> ‚ùå Veo prompt is empty<br>";
    return;
  }

  logEl.innerHTML += "> üé¨ Sending Veo Prompt...<br>";
  logEl.innerHTML += "<pre style='color:#0f0'>" + veoPrompt + "</pre>";

  try{
    const res = await fetch("http://localhost:3000/api/generate-video",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({
        prompt: veoPrompt
      })
    });

    const data = await res.json();

    if(data.success){
      logEl.innerHTML += "> ‚úÖ Veo Job Started<br>";
      logEl.innerHTML += `> üÜî Operation ID: ${data.operation}<br>`;
    }else{
      logEl.innerHTML += "> ‚ùå Veo API error<br>";
    }

  }catch(err){
    logEl.innerHTML += "> ‚ùå Backend connection failed<br>";
    console.error(err);
  }
}

renderPresets();
renderVeoPresets();
render();
</script>  </body>  
</html>
